<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Green Line’s Breaking Point</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            color: #fff;
            background: #008000;
        }

        h1 {
            font-size: 3rem;
            text-align: center;
            padding: 20px 20px 0;
            color: #fff;
            font-weight: 600;
        }

        p {
            font-size: 1.25rem;
            line-height: 1.8;
        }

        /* Fullscreen Section for Parallax Effect */
        .parallax {
            position: relative;
            min-height: 100vh;
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Section with Background Image and Overlayed Text */
        .background-section {
            position: relative;
            min-height: 80vh; /* Slightly smaller than full screen */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .text-box {
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            max-width: 650px;
            margin: 20px;
            padding: 30px;
            text-align: center;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(50px); /* Start lower */
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .text-box.visible {
            opacity: 1;
            transform: translateY(0); /* Slide into view */
        }

        img {
            max-width: 100%;
            display: block;
            margin: 20px auto;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <h1>The Green Line’s Breaking Point: What September Reveals About Boston’s Transit Failures</h1>

    <!-- Section 1 -->
    <div class="parallax" id="section1">
        <div class="text-box">
            <p>Rush hour on the Green Line is a Bostonian’s definition of frustration. At Prudential, the platform crowds with commuters, students, and shoppers as another two-car train pulls in. To no one's surprise, it’s already packed to capacity. A few determined riders squeeze on, but the rest wait, hoping the next train will hopefully have space.</p>
        </div>
    </div>

     <!-- Section 2 -->
    <div class="parallax" id="section2">
        <div class="text-box">
            <p>According to data from the MBTA about gated entries, in September 2024, over 1.5 million passengers entered gated Green Line stations, a surge driven by returning students and a revitalized post-pandemic city. A gated entry is recorded when a passenger taps their card or pays a fare at an underground station. But these numbers tell only part of the story. Above-ground stops, particularly on the B, C, and E Lines, rely on onboard fare collection, meaning untapped entries aren’t counted, bringing the number to well over 1.2 million.</p>
        </div>
    </div>

    <<!-- Section: Animated Bar Chart -->
<div class="parallax" id="bar-chart-section" style="background-color: white; padding: 50px 0;">
    <h2 style="text-align: center; color: black; margin-bottom: 20px;">Total Amount of Gated Entries Per Month</h2>
    <div id="chart" class="chart-container" style="display: flex; justify-content: center;"></div>
</div>

<script src="https://d3js.org/d3.v6.min.js"></script>
<script>
    // Data for the chart
    const data = [
        { month: "June", entries: 1496572 },
        { month: "July", entries: 1377880 },
        { month: "August", entries: 1459179 },
        { month: "September", entries: 1572163 }
    ];

    // Chart dimensions
    const margin = { top: 20, right: 20, bottom: 40, left: 100 };
    const width = 600; // Adjusted for better centering
    const height = 300; // Adjusted for better centering

    // Create the SVG
    const svg = d3.select("#chart")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

    // Create scales
    const x = d3.scaleLinear()
        .domain([0, d3.max(data, d => d.entries)])
        .range([0, width]);

    const y = d3.scaleBand()
        .domain(data.map(d => d.month))
        .range([0, height])
        .padding(0.1);

    // Add axes
    svg.append("g")
        .call(d3.axisLeft(y));

    svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(x).ticks(5));

    // Add bars
    const bars = svg.selectAll(".bar")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("y", d => y(d.month))
        .attr("height", y.bandwidth())
        .attr("x", 0)
        .attr("width", 0) // Start with 0 width for animation
        .style("fill", "#4CAF50");

    // Animate the bars on scroll
    const animateBars = () => {
        bars.transition()
            .duration(1000)
            .attr("width", d => x(d.entries));
    };

    // Add value labels on bars
    svg.selectAll(".value")
        .data(data)
        .enter()
        .append("text")
        .attr("class", "value")
        .attr("x", d => x(d.entries) + 5)
        .attr("y", d => y(d.month) + y.bandwidth() / 2)
        .attr("dy", ".35em")
        .text(d => d.entries.toLocaleString());

    // Observe when the chart comes into view
    const chartContainer = document.getElementById("chart");
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                chartContainer.classList.add("visible");
                animateBars();
            }
        });
    });

    observer.observe(chartContainer);
</script>


    <!-- Section 3 -->
    <div class="parallax" id="section3">
        <div class="text-box">
            <p>Moreover, the MBTA’s gated entry data removes an estimated number of riders who transfer to the Red Line at Park Street, the Blue Line at Government Center, and other intersecting lines. This filtering is meant to clarify Green Line-specific ridership, but it also risks underestimating the true load on the system.</p>
        </div>
    </div>

    <!-- Section 4 -->
    <div class="parallax" id="section4">
        <div class="text-box">
            <p>Yet, despite predictable increases in ridership, the Green Line operated with near-identical train frequencies to quieter summer months. Platforms overflowed at rush hour, trains arrived late, and passengers squeezed onto trains like sardines. September, with its unique mix of students returning and professionals back from summer, is Boston’s public transit stress test. For the Green Line, the numbers show that it failed—leaving riders waiting on platforms, crowding onto already-packed trains, and questioning whether the country’s oldest transit system can keep up with the modern city it needs to serve.</p>
        </div>
    </div>

    <!-- Section 5 -->
    <div class="parallax" id="section5">
        <div class="text-box">
            <p>The data reveals a critical failure of the Green Line during rush hours: train frequencies remain nearly unchanged from off-peak periods. On average, trains arrive every 8 to 9 minutes, even during the busiest morning (7:00–9:00 AM) and evening (4:00–6:00 PM) peaks. For a transit system tasked with absorbing predictable demand surges, this stagnation results in overcrowded platforms and delayed commutes.</p>
        </div>
    </div>

    <!-- Section 6 -->
    <div class="parallax" id="section6">
        <div class="text-box">
            <p>At Park Street, the busiest station on the Green Line, over 150,000 gated entries were recorded during September. In the evening rush hour alone, half-hour intervals saw average entries exceeding 600 riders (predicted Red Line passengers were calculated out of data by MBTA). For comparison, a two-car Green Line train has a maximum capacity of approximately 300 passengers.</p>
        </div>
    </div>

    <!-- Section 7 -->
    <div class="parallax" id="section7">
        <div class="text-box">
            <p>Even as the data reveals critical flaws, it also highlights the limitations of the MBTA’s current metrics. Above-ground stops on the B, C, and E Lines are unmeasured due to outdated onboard payment systems. Additionally, gated entries represent only passengers entering the Green Line system—they do not account for direction. Approximately half of these riders are traveling eastbound (inbound) and the other half westbound (outbound).</p>
        </div>
    </div>

    <!-- Section 8 -->
    <div class="parallax" id="section8">
        <div class="text-box">
            <p>The Green Line’s failures aren’t just inconveniences; they represent systemic risks for Boston. Transit inefficiencies increase commute times, disrupt productivity, and discourage public transit use, pushing more people into cars. This exacerbates traffic congestion, worsens air quality, and undermines the city’s climate goals.</p>
        </div>
    </div>

    <!-- Section 9 -->
    <div class="parallax" id="section9">
        <div class="text-box">
            <p>These challenges are solvable but urgent. Increasing train frequency during rush hours, modernizing fare collection to capture untapped ridership, and addressing infrastructure delays would dramatically improve service.</p>
        </div>
    </div>

    
    <!-- Section 10: Background Image with Visible Picture and Text Scrolls Up -->
    <div class="background-section" style="background-image: url('https://raw.githubusercontent.com/mcmosso/mbta-project/main/GL-Option-3-1.jpg');">
        <div class="text-box">
            <p>The MBTA has promised relief in the form of sleek new Green Line trains, set to debut by 2027, with larger cars capable of carrying nearly 300 passengers each. These updates are being hailed as a long-overdue fix to an overcrowded system. However, for riders who’ve endured years of delays and stagnant service, it is fair to feel excitement mixed with warranted skepticism.</p>
        </div>
    </div>

    <!-- Section 11 -->
    <div class="parallax" id="section10">
        <div class="text-box">
            <p>If Boston is serious about being a modern, sustainable city, its transit system must evolve. The Green Line, steeped in history, must become a part of Boston’s future, not a relic of its past.</p>
        </div>
    </div>

    <script>
        function handleScroll() {
            const textBoxes = document.querySelectorAll('.text-box');
            textBoxes.forEach(box => {
                const boxTop = box.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;

                // Reveal the text box when it's near the middle of the screen
                if (boxTop < windowHeight - 300) {
                    box.classList.add('visible');
                } else {
                    box.classList.remove('visible');
                }
            });
        }

        window.addEventListener('scroll', handleScroll);
        handleScroll();
    </script>

</body>
</html>
